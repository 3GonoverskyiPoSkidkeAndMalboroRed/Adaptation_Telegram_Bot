import os
import logging
from dotenv import load_dotenv
from telegram import Update, ReplyKeyboardMarkup, KeyboardButton
from telegram.ext import Updater, CommandHandler, MessageHandler, Filters, CallbackContext, ConversationHandler

# –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
load_dotenv()

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s', level=logging.INFO
)
logger = logging.getLogger(__name__)

# –°–æ—Å—Ç–æ—è–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞
START, COMPANY_INFO, ONBOARDING_INFO, OFFICE_INFO, WORK_INFO, FINANCE_INFO, PROJECT_INFO, EXTRA_INFO, FEEDBACK, REGULATIONS_INFO, TOOLS_INFO, TOOLS_SETUP, CHANNELS_INFO, FEEDBACK_SUPPORT, CULTURE_INFO, GAMIFICATION, CULTURE_LIFE, LINKS_INFO, QUIZ = range(19)

def start(update: Update, context: CallbackContext) -> int:
    """–ù–∞—á–∞–ª–æ –¥–∏–∞–ª–æ–≥–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–µ—Ä–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è."""
    user = update.effective_user
    
    # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    update.message.reply_text(
        "–®–∞–≥ 1. –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å –±–æ—Ç–æ–º: \n"
        f"–ü—Ä–∏–≤–µ—Ç, {user.first_name}! \n"
        f"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–æ–º–∞–Ω–¥—É Height Line ‚Äî –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ, \n"
        f"–≥–¥–µ —Ä–æ–∂–¥–∞—é—Ç—Å—è –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏ –∏ –±–æ–ª—å—à–∏–µ –±—Ä–µ–Ω–¥—ã.\n"
        f"–Ø —Ç–≤–æ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–æ–Ω–Ω—ã–π –±–æ—Ç –∏ –ø–æ–º–æ–≥—É —Ç–µ–±–µ –æ—Å–≤–æ–∏—Ç—å—Å—è –≤ –Ω–æ–≤–æ–º –º–µ—Å—Ç–µ"
    )
    
    # –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –Ω–∞—á–∞—Ç—å –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ
    reply_keyboard = [['–î–∞, –ø–æ–µ—Ö–∞–ª–∏'], ['–•–æ—á—É –ø–æ–∑–∂–µ']]
    update.message.reply_text(
        "–•–æ—á–µ—à—å –Ω–∞—á–∞—Ç—å –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ?",
        reply_markup=ReplyKeyboardMarkup(
            reply_keyboard, one_time_keyboard=True, resize_keyboard=True
        ),
    )
    
    return START

def handle_start_choice(update: Update, context: CallbackContext) -> int:
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –Ω–∞—á–∞–ª—å–Ω–æ–º —ç—Ç–∞–ø–µ."""
    choice = update.message.text
    
    if choice == '–î–∞, –ø–æ–µ—Ö–∞–ª–∏':
        # –ü–µ—Ä–µ—Ö–æ–¥ –∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–º–ø–∞–Ω–∏–∏
        update.message.reply_text(
            "–®–∞–≥ 2. –û –∫–æ–º–ø–∞–Ω–∏–∏ 'Height Line': \n"
            "–†–∞—Å—Å–∫–∞–∂—É –Ω–µ–º–Ω–æ–≥–æ –æ Height Line. –ú—ã –ø–µ—Ä–µ–¥–æ–≤–æ–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ \n"
            "performance-–º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞, –æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–µ —Å —Ü–µ–ª—å—é –ø–æ–º–æ–≥–∞—Ç—å –±—Ä–µ–Ω–¥–∞–º –∏ \n"
            "–ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è–º –≤ –†–æ—Å—Å–∏–∏ –∏ –∑–∞ –µ–µ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –¥–æ—Å—Ç–∏–≥–∞—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π \n"
            "—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏—Ö –æ–Ω–ª–∞–π–Ω-—Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π."
        )
        
        # –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –≤—ã–±—Ä–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–º–ø–∞–Ω–∏–∏
        reply_keyboard = [['–ò—Å—Ç–æ—Ä–∏—è', '–ö–ª–∏–µ–Ω—Ç—ã'], ['–ö–æ–º–∞–Ω–¥–∞', '–î–∞–ª–µ–µ']]
        update.message.reply_text(
            "–•–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å:\n"
            "1. –ò—Å—Ç–æ—Ä–∏—é –∫–æ–º–ø–∞–Ω–∏–∏\n"
            "2. –ö—Ç–æ –Ω–∞—à–∏ –∫–ª–∏–µ–Ω—Ç—ã\n"
            "3. –ö–æ–º–∞–Ω–¥—É\n"
            "4. –î–∞–ª–µ–µ",
            reply_markup=ReplyKeyboardMarkup(
                reply_keyboard, one_time_keyboard=True, resize_keyboard=True
            ),
        )
        
        return COMPANY_INFO  # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é –≤—ã–±–æ—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–º–ø–∞–Ω–∏–∏
    
    else:  # '–•–æ—á—É –ø–æ–∑–∂–µ'
        update.message.reply_text(
            "–•–æ—Ä–æ—à–æ, –≤–æ–∑–≤—Ä–∞—â–∞–π—Å—è, –∫–∞–∫ –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤!",
            reply_markup=ReplyKeyboardMarkup([['–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞']], 
                                             one_time_keyboard=True,
                                             resize_keyboard=True)
        )
        
        return ConversationHandler.END

def handle_company_info(update: Update, context: CallbackContext) -> int:
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–º–ø–∞–Ω–∏–∏."""
    choice = update.message.text
    
    if choice == '–ò—Å—Ç–æ—Ä–∏—è':
        update.message.reply_text(
            "–ù–∞—á–∞–≤ —Å–≤–æ—é –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–æ–ª–µ–µ –¥–µ—Å—è—Ç–∏ –ª–µ—Ç –Ω–∞–∑–∞–¥, Height Line –∑–∞ 2023 –≥–æ–¥ "
            "–ø—Ä–æ—è–≤–∏–ª–æ —Å–µ–±—è –∫–∞–∫ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ, —Å–ø–æ—Å–æ–±–Ω–æ–µ –ø—Ä–∏–≤–Ω–æ—Å–∏—Ç—å –∏–Ω–Ω–æ–≤–∞—Ü–∏–∏ –≤ –∏–Ω–¥—É—Å—Ç—Ä–∏—é "
            "–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞–º –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.\n\n"
            "–ê–≥–µ–Ω—Ç—Å—Ç–≤–æ Height Line –±—ã–ª–æ –æ—Å–Ω–æ–≤–∞–Ω–æ –≤ 2012 –≥–æ–¥—É. –ò–¥–µ—è –≤–æ–∑–Ω–∏–∫–ª–∞, –∫–æ–≥–¥–∞ "
            "–æ—Å–Ω–æ–≤–∞—Ç–µ–ª–∏ –æ—Å–æ–∑–Ω–∞–ª–∏: –∏–º–µ—é—â–µ–µ—Å—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —Ä—ã–Ω–∫–µ —É—Å–ª—É–≥ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞ –Ω–µ "
            "–ø–æ–∫—Ä—ã–≤–∞–µ—Ç —Ä–∞—Å—Ç—É—â–∏–π —Å–ø—Ä–æ—Å –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏ –≤ –æ–±–ª–∞—Å—Ç–∏ "
            "–Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –≤–µ–¥–µ–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∞ —Ä–µ–∫–ª–∞–º—ã. –û–Ω–∏ —É–≤–∏–¥–µ–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å "
            "–ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏ —Ä–µ–∫–ª–∞–º—ã –≤ —Ç–∞–∫–∏—Ö –æ–±–ª–∞—Å—Ç—è—Ö, –∫–∞–∫ "
            "—Ç–∞—Ä–≥–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –¥–ª—è e-commerce, –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å, —Ä–∏—Ç–µ–π–ª, "
            "–º–µ–¥–∏—Ü–∏–Ω–∞ –∏ —Ç.–¥. –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –º–∏—Ä–µ —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è "
            "–ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç —Å –±–µ—Å–ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é. –ù–æ–≤—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ "
            "—Ç—Ä–µ–Ω–¥—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ, –∏ –∫–æ–º–ø–∞–Ω–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –º–æ–≥—É—Ç –∏–ª–∏ –Ω–µ —Ö–æ—Ç—è—Ç "
            "–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è, —Ä–∏—Å–∫—É—é—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è –ø–æ–∑–∞–¥–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤. –°–µ–≥–æ–¥–Ω—è –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ "
            "—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –≥–ª—É–±–æ–∫–æ–π —Å–∫–≤–æ–∑–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–µ –æ—Ç —Ä–µ–∫–ª–∞–º—ã –¥–æ –ø—Ä–æ–¥–∞–∂, "
            "—á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è performance-–º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–º. –í Height Line –µ—Å—Ç—å –≥–æ—Ç–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è –ø–æ "
            "—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ä–µ–∫–ª–∞–º–µ –∏ —Å–∫–≤–æ–∑–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–µ."
        )
    
    elif choice == '–ö–ª–∏–µ–Ω—Ç—ã':
        update.message.reply_text(
            "–í –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ –∞–≥–µ–Ω—Ç—Å—Ç–≤–∞ –≤—Ö–æ–¥—è—Ç –∫—Ä—É–ø–Ω—ã–µ –±—Ä–µ–Ω–¥—ã –∏ –∫–æ–º–ø–∞–Ω–∏–∏, —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –≤ "
            "—Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ—Ç—Ä–∞—Å–ª—è—Ö —Ä—ã–Ω–∫–∞ –∫–∞–∫ –≤ –†–æ—Å—Å–∏–∏ —Ç–∞–∫ –∏ –∑–∞–≥—Ä–∞–Ω–∏—Ü–µ–π, —á—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç "
            "–≥–∏–±–∫–æ—Å—Ç—å –∏ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã—Ö —Ä–µ—à–µ–Ω–∏–π.\n\n"
            "–í —Å–≤–æ–µ–π —Ä–∞–±–æ—Ç–µ Height Line —É–¥–µ–ª—è–µ—Ç –æ—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–º—É –æ–±—É—á–µ–Ω–∏—é –∏ "
            "—Ä–∞–∑–≤–∏—Ç–∏—é, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≥–µ–Ω—Ç—Å—Ç–≤—É –Ω–µ —Ç–æ–ª—å–∫–æ —Å–ª–µ–¥–æ–≤–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º —Ç—Ä–µ–Ω–¥–∞–º "
            "–≤ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–µ, –Ω–æ –∏ –ø—Ä–µ–¥–≤–æ—Å—Ö–∏—â–∞—Ç—å –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤, –ø—Ä–µ–¥–ª–∞–≥–∞—è "
            "–∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ –∏—Ö –±–∏–∑–Ω–µ—Å–µ –Ω–∞–∏–ª—É—á—à–∏–º "
            "–æ–±—Ä–∞–∑–æ–º. –ö–∞–∂–¥—ã–π –ø—Ä–æ–µ–∫—Ç –≤ –∞–≥–µ–Ω—Ç—Å—Ç–≤–µ ‚Äî —ç—Ç–æ —Å–æ—á–µ—Ç–∞–Ω–∏–µ –∫—Ä–µ–∞—Ç–∏–≤–∞, –¥–∞–Ω–Ω—ã—Ö –∏ "
            "—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ –Ω–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –±–∏–∑–Ω–µ—Å-—Ü–µ–ª–µ–π –∫–ª–∏–µ–Ω—Ç–∞."
        )
    
    elif choice == '–ö–æ–º–∞–Ω–¥–∞':
        update.message.reply_text(
            "–ù–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ ‚Äî —ç—Ç–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—ã –≤ –æ–±–ª–∞—Å—Ç–∏ digital-–º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞: "
            "PPC-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã, —Ç–∞—Ä–≥–µ—Ç–æ–ª–æ–≥–∏, –∞–Ω–∞–ª–∏—Ç–∏–∫–∏, –¥–∏–∑–∞–π–Ω–µ—Ä—ã –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏. "
            "–í–º–µ—Å—Ç–µ –º—ã —Å–æ–∑–¥–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è."
        )
    
    elif choice == '–î–∞–ª–µ–µ':
        update.message.reply_text(
            "–®–∞–≥ 3. –†–µ–≥–ª–∞–º–µ–Ω—Ç—ã –∏ –ø—Ä–æ—Ü–µ—Å—Å—ã\n"
            "\n"
            "–ó–¥–µ—Å—å ‚Äî –≤–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–æ —Ä–∞–±–æ—Ç—É –≤ Height Line.\n"
            "–û —á—ë–º —Ä–∞—Å—Å–∫–∞–∂–µ–º?"
        )
        
        reply_keyboard = [['–†–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è', '–û—Ç–ø—É—Å–∫–∞ –∏ –±–æ–ª—å–Ω–∏—á–Ω—ã–µ'], ['–ö–∞–∫ –ø–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É', '–î–∞–ª–µ–µ']]
        update.message.reply_text(
            "–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–π –≤–∞—Å —Ä–∞–∑–¥–µ–ª:",
            reply_markup=ReplyKeyboardMarkup(reply_keyboard, one_time_keyboard=True, resize_keyboard=True)
        )
        
        return REGULATIONS_INFO  # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é REGULATIONS_INFO

    # –í–æ–∑–≤—Ä–∞—Ç –∫ –≤—ã–±–æ—Ä—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–º–ø–∞–Ω–∏–∏
    reply_keyboard = [['–ò—Å—Ç–æ—Ä–∏—è', '–ö–ª–∏–µ–Ω—Ç—ã'], ['–ö–æ–º–∞–Ω–¥–∞', '–î–∞–ª–µ–µ']]
    update.message.reply_text(
        "–•–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å:\n"
        "1. –ò—Å—Ç–æ—Ä–∏—é –∫–æ–º–ø–∞–Ω–∏–∏\n"
        "2. –ö—Ç–æ –Ω–∞—à–∏ –∫–ª–∏–µ–Ω—Ç—ã\n"
        "3. –ö–æ–º–∞–Ω–¥—É\n"
        "4. –î–∞–ª–µ–µ",
        reply_markup=ReplyKeyboardMarkup(
            reply_keyboard, one_time_keyboard=True, resize_keyboard=True
        ),
    )
    
    return COMPANY_INFO  # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é –≤—ã–±–æ—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–º–ø–∞–Ω–∏–∏

def handle_regulations_info(update: Update, context: CallbackContext) -> int:
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∞—Ö –∏ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö."""
    choice = update.message.text
    
    if choice == '–†–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è':
        update.message.reply_text(
            "–†–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è –≤ Height Line: \n"
            "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è —Å 9:00 –¥–æ 18:00, —Å –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞ –ø–æ –ø—è—Ç–Ω–∏—Ü—É."
        )
        
    elif choice == '–û—Ç–ø—É—Å–∫–∞ –∏ –±–æ–ª—å–Ω–∏—á–Ω—ã–µ':
        update.message.reply_text(
            "–û—Ç–ø—É—Å–∫–∞ –∏ –±–æ–ª—å–Ω–∏—á–Ω—ã–µ: \n"
            "–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∏–º–µ—é—Ç –ø—Ä–∞–≤–æ –Ω–∞ 28 –¥–Ω–µ–π –æ–ø–ª–∞—á–∏–≤–∞–µ–º–æ–≥–æ –æ—Ç–ø—É—Å–∫–∞ –≤ –≥–æ–¥. "
            "–ë–æ–ª—å–Ω–∏—á–Ω—ã–µ –æ–ø–ª–∞—á–∏–≤–∞—é—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º."
        )
        
    elif choice == '–ö–∞–∫ –ø–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É':
        update.message.reply_text(
            "–ß—Ç–æ–±—ã –ø–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –æ—Ç–ø—É—Å–∫ –∏–ª–∏ –±–æ–ª—å–Ω–∏—á–Ω—ã–π, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É "
            "–≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –µ—ë –≤–∞—à–µ–º—É —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—é."
        )
        
    elif choice == '–î–∞–ª–µ–µ':
        # –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —à–∞–≥ 4
        return handle_onboarding_plan(update, context)  # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
    
    # –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã–±–æ—Ä–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫ –≤—ã–±–æ—Ä—É
    reply_keyboard = [['–†–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è', '–û—Ç–ø—É—Å–∫–∞ –∏ –±–æ–ª—å–Ω–∏—á–Ω—ã–µ'], ['–ö–∞–∫ –ø–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É', '–î–∞–ª–µ–µ']]
    update.message.reply_text(
        "–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–π –≤–∞—Å —Ä–∞–∑–¥–µ–ª:",
        reply_markup=ReplyKeyboardMarkup(reply_keyboard, one_time_keyboard=True, resize_keyboard=True)
    )
    
    return REGULATIONS_INFO  # –í–æ–∑–≤—Ä–∞—Ç –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é REGULATIONS_INFO

def handle_onboarding_plan(update: Update, context: CallbackContext) -> int:
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–ª–∞–Ω–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞."""
    update.message.reply_text(
        "–®–∞–≥ 4. –û–Ω–±–æ—Ä–¥–∏–Ω–≥ –ø–ª–∞–Ω: \n"
        "–ó–¥–µ—Å—å –±—É–¥–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞, –≤–∫–ª—é—á–∞—è –≤–∞–∂–Ω—ã–µ –¥–∞—Ç—ã, "
        "–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –∏ —Ä–µ—Å—É—Ä—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –≤–∞–º –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –∫–æ–º–ø–∞–Ω–∏–∏."
    )
    
    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ "–î–∞" –∏ "–ù–µ—Ç"
    reply_keyboard = [['–î–∞', '–ù–µ—Ç']]
    update.message.reply_text(
        "–•–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –æ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞?",
        reply_markup=ReplyKeyboardMarkup(reply_keyboard, one_time_keyboard=True, resize_keyboard=True)
    )
    
    return ONBOARDING_INFO  # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é ONBOARDING_INFO

def handle_onboarding_response(update: Update, context: CallbackContext) -> int:
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å –æ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞."""
    choice = update.message.text
    
    if choice == '–î–∞':
        update.message.reply_text(
            "–û—Ç–ª–∏—á–Ω–æ! –ú—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–º –≤–∞–º –≤—Å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞."
        )
        # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —à–∞–≥—É 5
        return handle_step_five(update, context)
    else:  # '–ù–µ—Ç'
        update.message.reply_text(
            "–•–æ—Ä–æ—à–æ, –µ—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã, –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å!"
        )
        # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —à–∞–≥—É 5
        return handle_step_five(update, context)

def handle_step_five(update: Update, context: CallbackContext) -> int:
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —à–∞–≥–∞ 5.  –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –¥–æ—Å—Ç—É–ø—ã."""
    update.message.reply_text(
        "–®–∞–≥ 5. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –¥–æ—Å—Ç—É–ø—ã: \n"
        "–ó–¥–µ—Å—å –±—É–¥–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞, –≤–∫–ª—é—á–∞—è –≤–∞–∂–Ω—ã–µ –¥–∞—Ç—ã, "
        "–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –∏ —Ä–µ—Å—É—Ä—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –≤–∞–º –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –∫–æ–º–ø–∞–Ω–∏–∏."
    )
    
    # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ –∏–ª–∏ –¥—Ä—É–≥—É—é –ª–æ–≥–∏–∫—É –¥–ª—è —à–∞–≥–∞ 5
    reply_keyboard = [['–î–∞', '–ù–µ—Ç']]
    update.message.reply_text(
        "–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞.",
        reply_markup=ReplyKeyboardMarkup(reply_keyboard, one_time_keyboard=True, resize_keyboard=True)
    )
    
    return TOOLS_INFO  # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å –æ –¥–æ—Å—Ç—É–ø–∞—Ö

def handle_tools_response(update: Update, context: CallbackContext) -> int:
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å –æ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞."""
    choice = update.message.text
    
    if choice == '–î–∞':
        update.message.reply_text(
            "–û—Ç–ª–∏—á–Ω–æ! –í–æ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø—Ä–æ—Ü–µ—Å—Å—É –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞:\n"
            "- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è 1: [—Å—Å—ã–ª–∫–∞](http://example.com)\n"
            "- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è 2: [—Å—Å—ã–ª–∫–∞](http://example.com)\n"
            "- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è 3: [—Å—Å—ã–ª–∫–∞](http://example.com)"
        )
    
    # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —à–∞–≥—É 6
    return handle_step_six(update, context)  # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —à–∞–≥—É 6

def handle_step_six(update: Update, context: CallbackContext) -> int:
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —à–∞–≥–∞ 6. –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –≤ –∫–æ–º–∞–Ω–¥–µ."""
    update.message.reply_text(
        "–®–∞–≥ 6. –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –≤ –∫–æ–º–∞–Ω–¥–µ: \n"
        "–ó–¥–µ—Å—å –±—É–¥–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–º, –∫–∞–∫ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –æ–±—â–∞—Ç—å—Å—è —Å –≤–∞—à–µ–π –∫–æ–º–∞–Ω–¥–æ–π, "
        "–≤–∫–ª—é—á–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏."
    )
    
    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ "–î–∞" –∏ "–ù–µ—Ç"
    reply_keyboard = [['–î–∞', '–ù–µ—Ç']]
    update.message.reply_text(
        "–•–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã?",
        reply_markup=ReplyKeyboardMarkup(reply_keyboard, one_time_keyboard=True, resize_keyboard=True)
    )
    
    return LINKS_INFO  # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å –æ —Å—Å—ã–ª–∫–∞—Ö

def handle_links_response(update: Update, context: CallbackContext) -> int:
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å –æ —Å—Å—ã–ª–∫–∞—Ö."""
    choice = update.message.text
    
    if choice == '–î–∞':
        update.message.reply_text(
            "–í–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–µ–∑–Ω—ã—Ö —Å—Å—ã–ª–æ–∫:\n"
            "- –°—Å—ã–ª–∫–∞ 1: [–ø—Ä–∏–º–µ—Ä](http://example.com)\n"
            "- –°—Å—ã–ª–∫–∞ 2: [–ø—Ä–∏–º–µ—Ä](http://example.com)\n"
            "- –°—Å—ã–ª–∫–∞ 3: [–ø—Ä–∏–º–µ—Ä](http://example.com)\n"
        )
        # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —à–∞–≥—É 7
        return handle_step_seven(update, context)  # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —à–∞–≥—É 7
    else:  # '–ù–µ—Ç'
        update.message.reply_text(
            "–•–æ—Ä–æ—à–æ, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É."
        )
    
    # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —à–∞–≥—É 7
    return handle_step_seven(update, context)  # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —à–∞–≥—É 7

def handle_step_seven(update: Update, context: CallbackContext) -> int:
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —à–∞–≥–∞ 7."""
    update.message.reply_text(
        "–®–∞–≥ 7. –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞: \n"
        "–ß—É–≤—Å—Ç–≤—É–µ—à—å, —á—Ç–æ —á—Ç–æ-—Ç–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ? –ù–µ –±–µ–¥–∞ ‚Äî –≤–æ—Ç –∫—É–¥–∞ –º–æ–∂–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è: \n"
        "–¢–∏–º–ª–∏–ª –ò—Ä–∏–Ω–∞ ‚Äî {tg —Ç–∏–º–ª–∏–¥–∞} \n"
        "–¢–≤–æ–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –ü–∞–≤–µ–ª  ‚Äî {tg —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è}"
    )
    
    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ "–î–∞–ª–µ–µ" –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —à–∞–≥ 9
    reply_keyboard = [['–î–∞–ª–µ–µ']]
    update.message.reply_text(
        "–•–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –æ –∫—É–ª—å—Ç—É—Ä–µ –∏ –≤–Ω–µ—Ä–∞–±–æ—á–µ–π –∂–∏–∑–Ω–∏?",
        reply_markup=ReplyKeyboardMarkup(reply_keyboard, one_time_keyboard=True, resize_keyboard=True)
    )
    
    return CULTURE_INFO  # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é, –æ–∂–∏–¥–∞—é—â–µ–º—É –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–î–∞–ª–µ–µ"

def handle_culture_info(update: Update, context: CallbackContext) -> int:
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–î–∞–ª–µ–µ" –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —à–∞–≥ 9."""
    return handle_step_nine(update, context)  # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —à–∞–≥—É 9

def handle_step_nine(update: Update, context: CallbackContext) -> int:
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —à–∞–≥–∞ 9. –ö—É–ª—å—Ç—É—Ä–∞ –∏ –≤–Ω–µ—Ä–∞–±–æ—á–∞—è –∂–∏–∑–Ω—å."""
    update.message.reply_text(
        "–®–∞–≥ 9. –ö—É–ª—å—Ç—É—Ä–∞ –∏ –≤–Ω–µ—Ä–∞–±–æ—á–∞—è –∂–∏–∑–Ω—å üî•\n"
        "–£ –Ω–∞—Å –Ω–µ —Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—Ç–∞, –Ω–æ –∏ –∂–∏–∑–Ω—å!\n"
        "–ö–∞–∂–¥—ã–π –º–µ—Å—è—Ü ‚Äî –ø–∏—Ü—Ü–∞-–ø—è—Ç–Ω–∏—Ü–∞ üçï\n"
        "–ö–∞–∂–¥—É—é —Å—Ä–µ–¥—É ‚Äî —É—Ç—Ä–µ–Ω–Ω–∏–π –∫–æ—Ñ–µ —Å –∫–æ–º–∞–Ω–¥–æ–π ‚òï\n"
        "–†–∞–∑ –≤ –∫–≤–∞—Ä—Ç–∞–ª ‚Äî —Ç–∏–º–±–∏–ª–¥–∏–Ω–≥ (–∫–≤–µ—Å—Ç—ã, –≤—ã–µ–∑–¥—ã, —Å–ø–æ—Ä—Ç).\n"
        "–•–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å, –∫–æ–≥–¥–∞ —Å–ª–µ–¥—É—é—â–µ–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ?"
    )
    
    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ "–î–∞" –∏ "–ù–µ—Ç"
    reply_keyboard = [['–î–∞', '–ù–µ—Ç']]
    update.message.reply_text(
        "–•–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –æ —Å–ª–µ–¥—É—é—â–µ–º –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏?",
        reply_markup=ReplyKeyboardMarkup(reply_keyboard, one_time_keyboard=True, resize_keyboard=True)
    )
    
    return GAMIFICATION  # –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞ –∏–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É
    
  

def handle_gamification_response(update: Update, context: CallbackContext) -> int:
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å –æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏."""
    choice = update.message.text
    
    if choice == '–î–∞':
        update.message.reply_text(
            "–ê –±–ª–∏–∂–∞–π—à–∏–π –º–µ—Å—è—Ü –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –Ω–µ—Ç."
        )
    elif choice == '–ù–µ—Ç':
        update.message.reply_text(
            "–•–æ—Ä–æ—à–æ, –¥–≤–∏–≥–∞–µ–º—Å—è –¥–∞–ª—å—à–µ."
        )
    
    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ "–î–∞–ª–µ–µ"

    
    return handle_step_ten(update, context)


def handle_step_ten(update: Update, context: CallbackContext) -> int:
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —à–∞–≥–∞ 10.  –ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è."""
    update.message.reply_text(
        "–®–∞–≥ 10. –ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è"
        " –ì–æ—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ç—ã –æ—Å–≤–æ–∏–ª—Å—è? \n"
        "–ñ–º–∏ '–ù–∞—á–∞—Ç—å –∫–≤–∏–∑', —á—Ç–æ–±—ã –ø—Ä–æ–π—Ç–∏ \n"
        "–∫–æ—Ä–æ—Ç–∫–∏–π —Ç–µ—Å—Ç –∏ –∑–∞–∫—Ä–µ–ø–∏—Ç—å —Å–≤–æ–∏ \n"
        "–∑–Ω–∞–Ω–∏—è –ø–æ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏"
    )
    
    return handle_quiz(update, context)
    

def handle_quiz(update: Update, context: CallbackContext) -> int:
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–≤–∏–∑–∞ —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏."""
    questions = [
        {
            "question": "–í–æ–ø—Ä–æ—Å 1: –ö–∞–∫–æ–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Telegram-–±–æ—Ç–æ–≤?",
            "options": ["Python", "Java", "C++", "Ruby"],
            "correct": 0  # –ò–Ω–¥–µ–∫—Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ (0-based)
        },
        {
            "question": "–í–æ–ø—Ä–æ—Å 2: –ö–∞–∫–æ–π –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Telegram?",
            "options": ["sendMessage", "postMessage", "sendText", "sendUpdate"],
            "correct": 0
        },
        {
            "question": "–í–æ–ø—Ä–æ—Å 3: –ö–∞–∫–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –º–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å Telegram-–±–æ—Ç–∞–º–∏ –Ω–∞ Python?",
            "options": ["python-telegram-bot", "telegram-api", "telebot", "pyTelegram"],
            "correct": 0
        },
        {
            "question": "–í–æ–ø—Ä–æ—Å 4: –ö–∞–∫–æ–π –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –æ—Ç Telegram?",
            "options": ["getUpdates", "fetchUpdates", "retrieveUpdates", "updateMessages"],
            "correct": 0
        },
        {
            "question": "–í–æ–ø—Ä–æ—Å 5: –ö–∞–∫–æ–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Telegram?",
            "options": ["JSON", "XML", "YAML", "CSV"],
            "correct": 0
        }
    ]
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤–æ–ø—Ä–æ—Å—ã –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
    context.user_data['quiz'] = questions
    context.user_data['current_question'] = 0
    
    return ask_question(update, context)  # –ü–µ—Ä–µ—Ö–æ–¥ –∫ –ø–µ—Ä–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –≤–æ–ø—Ä–æ—Å–∞

def ask_question(update: Update, context: CallbackContext) -> int:
    """–ó–∞–¥–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –≤–æ–ø—Ä–æ—Å –∏–∑ –∫–≤–∏–∑–∞."""
    questions = context.user_data['quiz']
    current_question = context.user_data['current_question']
    
    if current_question < len(questions):
        question = questions[current_question]
        reply_keyboard = [[option for option in question["options"]]]
        
        update.message.reply_text(
            question["question"],
            reply_markup=ReplyKeyboardMarkup(reply_keyboard, one_time_keyboard=True, resize_keyboard=True)
        )
        
        return QUIZ  # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é –∫–≤–∏–∑–∞
    
    else:
        update.message.reply_text("–ö–≤–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω! –°–ø–∞—Å–∏–±–æ –∑–∞ —É—á–∞—Å—Ç–∏–µ.")
        return ConversationHandler.END  # –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞

def handle_quiz_response(update: Update, context: CallbackContext) -> int:
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å –∫–≤–∏–∑–∞."""
    questions = context.user_data['quiz']
    current_question = context.user_data['current_question']
    
    if current_question < len(questions):
        question = questions[current_question]
        answer = update.message.text
        
        if answer == question["options"][question["correct"]]:
            context.user_data['current_question'] += 1  # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É
            return ask_question(update, context)  # –ó–∞–¥–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å
        else:
            update.message.reply_text("–ù–µ—Å–æ–≤—Å–µ–º. –ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑.")
            return ask_question(update, context)  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫ —Ç–µ–∫—É—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É
    
    return ConversationHandler.END  # –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞


def restart(update: Update, context: CallbackContext) -> int:
    """–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞."""
    return start(update, context)

def main() -> None:
    """–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞."""
    # –°–æ–∑–¥–∞–Ω–∏–µ Updater –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –µ–º—É —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞
    token = os.getenv("TELEGRAM_BOT_TOKEN")
    if not token:
        logger.error("–¢–æ–∫–µ–Ω –±–æ—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è")
        return
    
    updater = Updater(token)
    
    # –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
    dispatcher = updater.dispatcher
    
    # –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –¥–∏–∞–ª–æ–≥–∞
    conv_handler = ConversationHandler(
        entry_points=[CommandHandler('start', start)],
        states={
            START: [MessageHandler(Filters.regex('^(–î–∞, –ø–æ–µ—Ö–∞–ª–∏|–•–æ—á—É –ø–æ–∑–∂–µ)$'), handle_start_choice)],
            COMPANY_INFO: [MessageHandler(Filters.regex('^(–ò—Å—Ç–æ—Ä–∏—è|–ö–ª–∏–µ–Ω—Ç—ã|–ö–æ–º–∞–Ω–¥–∞|–î–∞–ª–µ–µ)$'), handle_company_info)],
            REGULATIONS_INFO: [MessageHandler(Filters.regex('^(–†–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è|–û—Ç–ø—É—Å–∫–∞ –∏ –±–æ–ª—å–Ω–∏—á–Ω—ã–µ|–ö–∞–∫ –ø–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É|–î–∞–ª–µ–µ)$'), handle_regulations_info)],
            ONBOARDING_INFO: [MessageHandler(Filters.regex('^(–î–∞|–ù–µ—Ç)$'), handle_onboarding_response)],  # –ù–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–≤–µ—Ç–∞
            TOOLS_INFO: [MessageHandler(Filters.regex('^(–î–∞|–ù–µ—Ç)$'),handle_tools_response )],  # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å –æ —Å—Å—ã–ª–∫–∞—Ö
            LINKS_INFO: [MessageHandler(Filters.regex('^.*$'),handle_links_response )],  # –û–±—Ä–∞–±–æ—Ç–∫–∞ —à–∞–≥–∞ 7
            CULTURE_INFO: [MessageHandler(Filters.regex('^.*$'), handle_culture_info)],  # –û–±—Ä–∞–±–æ—Ç–∫–∞ —à–∞–≥–∞ 9
            GAMIFICATION: [MessageHandler(Filters.regex('^(–î–∞|–ù–µ—Ç)$'), handle_gamification_response)],  # –û–±—Ä–∞–±–æ—Ç–∫–∞ —à–∞–≥–∞ 10
            QUIZ: [MessageHandler(Filters.regex('^.*$'), handle_quiz_response)],  # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å –∫–≤–∏–∑–∞
        },
        fallbacks=[CommandHandler('start', start)],
    )
    
    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –¥–∏–∞–ª–æ–≥–∞
    dispatcher.add_handler(conv_handler)
    
    # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞
    dispatcher.add_handler(MessageHandler(Filters.regex('^–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞$'), restart))
    
    # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
    updater.start_polling()
    updater.idle()

if __name__ == '__main__':
    main() 